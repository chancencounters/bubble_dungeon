{"version":3,"sources":["webpack:///webpack/bootstrap 017b4777a61a0774c559","webpack:///./lib/bubble_dungeon.js","webpack:///./lib/bubble.js","webpack:///./lib/constants.js","webpack:///./lib/game.js","webpack:///./lib/gun.js"],"names":["Bubble","require","Game","document","addEventListener","canvas","getElementById","stage","createjs","Stage","context","getContext","game","start","updateTicker","update","Ticker","setFPS","Constants","pos","colors","x","y","vx","vy","xCoefficient","processed","createBubble","color","Math","floor","random","length","bubble","Sprite","sheet","rotation","angle","toRadians","sin","cos","stop","getBoardPosition","bubbleX","row","rowWidth","bubbleY","col","rowHeight","round","rows","PI","module","exports","cols","radius","bubbleHeight","bubbleWidth","blue","SpriteSheet","framerate","yellow","red","green","oddDeltas","evenDeltas","Gun","bubbles","shooting","turns","text","gameOver","removeAllChildren","remainingColors","createBubbles","renderBubbles","gun","resetCurrentBubble","addChild","checkGameOver","updateAllBubbles","renderTurns","currentBubble","checkCollisions","allBubbles","forEach","console","log","getBubbleCoords","removeChild","Text","textBaseline","includes","push","dx","dy","distance","sqrt","checkCollision","snapBubble","addBubbleToBoard","burstMatching","matchingBubbles","findMatching","removeBubble","dropFloatingBubbles","resetBubbles","uncheckedBubbles","matching","pop","neighbors","getNeighbors","floating","cluster","findFloating","every","concat","window","setTimeout","unchecked","flatBubbles","apply","grid","bubblex","bubbley","deltas","i","deltax","deltay","checkWin","checkLost","renderGameOverMsg","reset","isWon","createGun","handleRotation","bind","handleShoot","bindKeyHandlers","event","code","keyCode","preventDefault","shoot","fire","img","Image","src","Bitmap","gunContainer","Container","regX","regY"],"mappings":"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","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 017b4777a61a0774c559","const Bubble = require(\"./bubble\");\nconst Game = require(\"./game\");\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  const canvas = document.getElementById(\"canvas\");\n  const stage = new createjs.Stage(canvas);\n  const context = canvas.getContext(\"2d\");\n  const game = new Game(stage, context);\n\n  game.start();\n  const updateTicker = () => {\n    game.update();\n    stage.update();\n  };\n  createjs.Ticker.setFPS(60);\n  createjs.Ticker.addEventListener('tick', updateTicker);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bubble_dungeon.js","import * as Constants from './constants';\n\nclass Bubble {\n  constructor(pos, colors) {\n    this.x = pos.x;\n    this.y = pos.y;\n    this.vx = 0;\n    this.vy = 0;\n    this.xCoefficient = 1;\n    this.processed = false;\n    this.colors = colors;\n    this.createBubble();\n  }\n\n  createBubble() {\n    this.color = this.colors[Math.floor(Math.random() * this.colors.length)];\n    this.bubble = new createjs.Sprite(this.color.sheet, \"animate\");\n    this.bubble.x = this.x;\n    this.bubble.y = this.y;\n  }\n\n  fire(rotation) {\n    let angle = this.toRadians(-1 * (rotation + 180));\n\n    this.vx = 15 * Math.sin(angle);\n    this.vy = 15 * Math.cos(angle);\n  }\n\n  update() {\n    if (this.bubble.x < 0 || this.bubble.x > 390) this.xCoefficient *= -1;\n    if (this.y > 400) this.stop;\n\n    this.x += this.vx * this.xCoefficient;\n    this.y += this.vy;\n    this.bubble.x = this.x;\n    this.bubble.y = this.y;\n  }\n\n  snapBubble() {\n    this.stop();\n    const pos = this.getBoardPosition();\n\n    let bubbleX = (pos.row * Constants.rowWidth);\n    let bubbleY = (pos.col * Constants.rowHeight);\n\n    if (pos.col % 2 === 0) bubbleX += Constants.rowWidth / 2;\n\n    this.x = bubbleX;\n    this.y = bubbleY;\n    this.bubble.x = bubbleX;\n    this.bubble.y = bubbleY;\n  }\n\n  getBoardPosition() {\n    let col = Math.round(this.bubble.y / Constants.rowHeight);\n    let row;\n    if (col % 2 === 0) {\n      row = Math.round((this.bubble.x - 16) / Constants.rowWidth)\n    } else {\n      row = Math.round(this.bubble.x/ Constants.rowWidth);\n    }\n\n    if (row < 0) row = 0;\n    if (row >= Constants.rows) row = Constants.rows - 1;\n\n    return { row: row, col: col };\n  }\n\n  stop() {\n    this.vx = 0;\n    this.vy = 0;\n  }\n\n  toRadians (angle) {\n    return angle * (Math.PI / 180);\n  }\n}\n\nmodule.exports = Bubble;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bubble.js","export const rows = 12;\nexport const cols = 5;\nexport const rowHeight = 32;\nexport const rowWidth = 32;\nexport const radius = 16;\nexport const bubbleHeight = 32;\nexport const bubbleWidth = 32;\n\nexport const blue = {\n  color: \"blue\",\n  sheet: new createjs.SpriteSheet({\n    framerate: 30,\n    \"images\": [\"./assets/images/blue-bubble.png\"],\n    \"frames\": {\n      \"regX\": 0,\n      \"regY\": 0,\n      \"width\": 32,\n      \"height\": 32,\n      \"count\": 6\n    },\n    \"animations\": {\n      \"animate\": [0, 5, \"animate\", .15],\n    }\n  })\n};\n\nexport const yellow = {\n  color: \"yellow\",\n  sheet: new createjs.SpriteSheet({\n    framerate: 30,\n    \"images\": [\"./assets/images/yellow-bubble.png\"],\n    \"frames\": {\n      \"regX\": 0,\n      \"regY\": 0,\n      \"width\": 32,\n      \"height\": 32,\n      \"count\": 6\n    },\n    \"animations\": {\n      \"animate\": [0, 5, \"animate\", .15],\n    }\n  })\n};\n\nexport const red = {\n  color: \"red\",\n  sheet: new createjs.SpriteSheet({\n    framerate: 30,\n    \"images\": [\"./assets/images/red-bubble.png\"],\n    \"frames\": {\n      \"regX\": 0,\n      \"regY\": 0,\n      \"width\": 32,\n      \"height\": 32,\n      \"count\": 6\n    },\n    \"animations\": {\n      \"animate\": [0, 5, \"animate\", .15],\n    }\n  })\n};\n\nexport const green = {\n  color: \"green\",\n  sheet: new createjs.SpriteSheet({\n    framerate: 30,\n    \"images\": [\"./assets/images/green-bubble.png\"],\n    \"frames\": {\n      \"regX\": 0,\n      \"regY\": 0,\n      \"width\": 32,\n      \"height\": 32,\n      \"count\": 6\n    },\n    \"animations\": {\n      \"animate\": [0, 5, \"animate\", .15],\n    }\n  })\n};\n\nexport const oddDeltas = [[-1,-1], [0,-1], [-1,0], [1, 0], [-1,1], [0,1]];\nexport const evenDeltas = [[0,-1], [1,-1], [-1,0], [1, 0], [0,1], [1,1]];\n\n\n\n// WEBPACK FOOTER //\n// ./lib/constants.js","const Bubble = require(\"./bubble\");\nconst Gun = require(\"./gun\");\nimport * as Constants from './constants';\n\nclass Game {\n  constructor(stage, context) {\n    this.bubbles = [];\n    this.shooting = false;\n    this.turns = 100;\n    this.stage = stage;\n    this.context = context;\n    this.text = \"\";\n    this.gameOver = false;\n    this.colors = [Constants.blue, Constants.red, Constants.yellow, Constants.green];;\n  }\n\n  reset() {\n    this.stage.removeAllChildren();\n    this.turns = 30;\n    this.bubbles = [];\n    this.gameOver = false;\n    this.start();\n  }\n\n  start() {\n    this.colors = this.remainingColors();\n    this.createBubbles();\n    this.renderBubbles();\n    this.gun = new Gun(this, this.stage);\n    this.resetCurrentBubble();\n    this.stage.addChild(this.gun.gun);\n  }\n\n  update() {\n    this.checkGameOver();\n    this.updateAllBubbles();\n    // this.dropFloatingBubbles();\n    this.renderTurns();\n    if (this.shooting) {\n      this.currentBubble.update();\n      this.checkCollisions();\n      this.renderBubbles();\n    }\n  }\n\n  updateAllBubbles() {\n    this.allBubbles().forEach((bubble) => {\n      if (bubble !== -1) bubble.update();\n    });\n  }\n\n  resetCurrentBubble() {\n    const pos = { x: 190, y: 355 };\n    const bubble = new Bubble(pos, this.remainingColors());\n    this.currentBubble = bubble;\n    this.gun.currentBubble = bubble;\n    this.stage.addChild(this.currentBubble.bubble);\n  }\n\n  createBubbles() {\n    for (let x = 0; x < Constants.rows; x++) {\n      this.bubbles[x] = [];\n      for (let y = 0; y < Constants.cols; y++) {\n        console.log(`Bubble`);\n        console.log(x);\n        console.log(y);\n        console.log(this.getBubbleCoords(x,y));\n        this.bubbles[x][y] = new Bubble(this.getBubbleCoords(x, y), this.colors);\n      }\n    }\n  }\n\n  renderTurns() {\n    this.stage.removeChild(this.text);\n    const text = new createjs.Text(`Turns Left: ${this.turns}`, \"18px Arial\", \"#ffffff\");\n    text.x = 250;\n    text.y = 370;\n    text.textBaseline = \"alphabetic\";\n    this.text = text;\n    this.stage.addChild(text);\n  }\n\n  renderBubbles() {\n    this.allBubbles().forEach(bubble => {\n      this.stage.addChild(bubble.bubble);\n    });\n  }\n\n  remainingColors() {\n    const remainingColors = [];\n\n    this.allBubbles().forEach(bubble => {\n      if (bubble !== -1) {\n        this.colors.forEach(color => {\n          if (bubble.color.color === color.color && !remainingColors.includes(color)) {\n            remainingColors.push(color);\n          }\n        });\n      }\n    });\n\n    if (remainingColors.length === 0) {\n      return this.colors;\n    } else {\n      return remainingColors;\n    }\n  }\n\n  checkCollision(bubble, currentBubble) {\n    const dx = bubble.x - currentBubble.bubble.x;\n    const dy = bubble.y - currentBubble.bubble.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (distance < 32) return true;\n\n    return false;\n  }\n\n  checkCollisions() {\n    this.allBubbles().forEach((bubble) => {\n      if (bubble!== -1) {\n        if ((this.checkCollision(bubble.bubble, this.gun.currentBubble)) || this.gun.currentBubble.y <= 0) {\n          this.turns -= 1;\n          this.gun.currentBubble.snapBubble();\n          this.addBubbleToBoard();\n          this.burstMatching(this.gun.currentBubble);\n          this.resetCurrentBubble();\n          this.shooting = false;\n          console.log(this.bubbles);\n        }\n      }\n    });\n  }\n\n  burstMatching(bubble){\n    const matchingBubbles = this.findMatching(bubble);\n\n    if (matchingBubbles.length >= 3){\n      matchingBubbles.forEach( bubble => {\n        this.removeBubble(bubble);\n      });\n      this.dropFloatingBubbles();\n    }\n  }\n\n  findMatching(bubble){\n    this.resetBubbles();\n\n    const uncheckedBubbles = [bubble];\n    bubble.processed = true;\n    const matching = [];\n\n    while (uncheckedBubbles.length > 0){\n      let currentBubble = uncheckedBubbles.pop();\n\n      if (currentBubble.color.color === bubble.color.color) {\n         matching.push(currentBubble);\n         let neighbors = this.getNeighbors(currentBubble);\n         neighbors.forEach( bubble => {\n           if (!bubble.processed){\n             uncheckedBubbles.push(bubble);\n             bubble.processed = true;\n           }\n         });\n      }\n    }\n    return matching;\n  }\n\n  dropFloatingBubbles(){\n    this.resetBubbles();\n\n    let floating = [];\n\n    this.allBubbles().forEach( bubble => {\n      if (bubble !== -1) {\n        if (!bubble.processed) {\n          const cluster = this.findFloating(bubble);\n          if (cluster.every( bubble => bubble.y !== 0)){\n            floating = floating.concat(cluster);\n          }\n        }\n      }\n    });\n\n    floating.forEach( bubble => {\n      const pos = bubble.getBoardPosition();\n      bubble.vy = 10;\n\n      window.setTimeout(()  => {\n        this.bubbles[pos.row][pos.col] = -1;\n        this.stage.removeChild(bubble.bubble);\n      }, 1000)\n    });\n  }\n\n  findFloating(bubble) {\n    const unchecked = [bubble];\n    bubble.processed = true;\n    const floating = [];\n\n    while (unchecked.length > 0) {\n      const currentBubble = unchecked.pop();\n      floating.push(currentBubble);\n\n      const neighbors = this.getNeighbors(currentBubble);\n      neighbors.forEach( bubble => {\n        if(!bubble.processed){\n          unchecked.push(bubble);\n          bubble.processed = true;\n        }\n      });\n    }\n\n    return floating;\n  }\n\n  resetBubbles() {\n    let flatBubbles = [].concat.apply([], this.bubbles);\n    flatBubbles.forEach( bubble => {\n      if ( bubble !== -1 ) bubble.processed = false;\n    });\n  }\n\n  addBubbleToBoard() {\n    const pos = this.gun.currentBubble.getBoardPosition();\n\n    if (this.bubbles[pos.row][pos.col] instanceof Bubble) {\n      console.log(\"issue\");\n      console.log(pos.row);\n      console.log(pos.col);\n      this.gun.currentBubble.x += Constants.rowWidth;\n      this.bubbles[pos.row + 1][pos.col] = this.gun.currentBubble;\n    } else {\n      console.log(pos.row);\n      console.log(pos.col);\n      this.bubbles[pos.row][pos.col] = this.gun.currentBubble;\n    }\n  }\n\n  removeBubble(bubble) {\n    const grid = bubble.getBoardPosition();\n    this.bubbles[grid.row][grid.col] = -1;\n    this.stage.removeChild(bubble.bubble);\n  }\n\n  allBubbles() {\n    let flatBubbles = [].concat.apply([], this.bubbles);\n    return flatBubbles;\n  }\n\n  getBubbleCoords(x, y) {\n    let bubblex = (x * Constants.rowWidth);\n    let bubbley = (y * Constants.rowHeight);\n\n    if (y % 2 === 0) {\n      bubblex += Constants.rowWidth / 2;\n    }\n\n    return { x: bubblex, y: bubbley };\n  }\n\n  getNeighbors(bubble) {\n    let pos = bubble.getBoardPosition();\n    const neighbors = [];\n\n    const deltas = pos.col % 2 === 1 ? Constants.oddDeltas : Constants.evenDeltas;\n\n    for (let i = 0; i < deltas.length; i++) {\n      let deltax = pos.row + deltas[i][0];\n      let deltay = pos.col + deltas[i][1];\n\n      if (deltax >= 0 && deltax < Constants.rows && deltay >= 0 && deltay < 12) {\n        if (this.bubbles[deltax][deltay]) {\n          if (this.bubbles[deltax][deltay] !== -1){\n            neighbors.push(this.bubbles[deltax][deltay]);\n          }\n        }\n      }\n    }\n\n    return neighbors;\n  }\n\n  checkGameOver() {\n    if (!this.gameOver) {\n      this.checkWin();\n      this.checkLost();\n    }\n  }\n\n  checkWin() {\n    if (this.allBubbles().every( bubble => !(bubble instanceof Bubble) )) {\n      this.renderGameOverMsg(true);\n      if (this.gameOver === false) {\n        window.setTimeout(() => {\n          this.reset();\n        }, 2000);\n        this.gameOver = true;\n      }\n    }\n  }\n\n  checkLost() {\n    this.allBubbles().forEach(bubble => {\n      if ((bubble.y > 305 && bubble.vy === 0) || this.turns === 0) {\n        this.renderGameOverMsg(false);\n\n          window.setTimeout(() => {\n            this.reset();\n          }, 2000);\n          this.gameOver = true;\n\n      }\n    })\n  }\n\n  renderGameOverMsg(isWon) {\n    let text = \"\";\n    if (isWon) {\n      text = new createjs.Text(`You Win!`, \"80px Arial\", \"#ffffff\");\n      text.x = 55;\n    } else {\n      text = new createjs.Text(`You Lost! Try again!`, \"40px Arial\", \"#ffffff\");\n      text.x = 35;\n    }\n\n    text.y = 200;\n    text.textBaseline = \"alphabetic\";\n    this.stage.addChild(text);\n  }\n}\n\nmodule.exports = Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","class Gun {\n  constructor (game, stage){\n    this.game = game;\n    this.gun = this.createGun();\n    this.stage = stage;\n    this.handleRotation = this.handleRotation.bind(this);\n    this.handleShoot = this.handleShoot.bind(this);\n    this.bindKeyHandlers();\n  }\n\n  bindKeyHandlers(){\n    document.addEventListener(\"keydown\", this.handleRotation);\n    document.addEventListener(\"keypress\", this.handleShoot);\n  }\n\n  handleRotation(event) {\n    const code = event.keyCode;\n\n    if (code === 37 || code === 65){\n      event.preventDefault();\n      if (this.gun.rotation > -85) this.gun.rotation -= 5;\n    } else if (code === 39 || code === 68){\n      event.preventDefault();\n      if (this.gun.rotation < 85) this.gun.rotation += 5;\n    }\n  }\n\n  handleShoot(event) {\n    const code = event.keyCode;\n\n    if (code === 32 || code === 13) this.shoot();\n  }\n\n  shoot() {\n    this.currentBubble.fire(this.gun.rotation);\n    this.game.shooting = true;\n  }\n\n  createGun(){\n    const img = new Image();\n    img.src = \"./assets/images/gun.png\";\n    const gun = new createjs.Bitmap(img);\n\n    const gunContainer = new createjs.Container();\n    gunContainer.x = 205;\n    gunContainer.y = 372;\n    gun.regX = 16;\n    gun.regY = 51;\n    gun.x = 0;\n    gun.y = 0;\n    gunContainer.addChild(gun);\n    return gunContainer;\n  }\n}\n\nmodule.exports = Gun;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/gun.js"],"sourceRoot":""}